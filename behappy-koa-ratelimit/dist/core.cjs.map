{"version":3,"file":"core.cjs","sources":["../lib/microtime.js","../lib/redisOperation.js","../lib/core.js"],"sourcesContent":["'use strict'\n\nconst time = Date.now() * 1e3\nconst start = process.hrtime.bigint()\n\nexport default () => time + Number(process.hrtime.bigint() - start) * 1e-3\n","const toNumber = str => parseInt(str, 10)\r\n\r\nexport async function getId(ctx, type, opts = {}) {\r\n  // 【当type为qps时，duration应该配置为1000(1s)】\r\n  switch (type) {\r\n    case 'ip':\r\n      return ctx.ip\r\n    case 'qps':\r\n      return {appName: opts}\r\n    case 'interface':\r\n      return `${ctx.method}-${ctx.path}`\r\n    case 'hot':\r\n      const params = {...ctx.query, ...ctx.request.body};\r\n      let returnValue\r\n      for (const [configValue, sort] of Object.entries(opts.configValue)) {\r\n        const configValueArr = configValue.split(':');\r\n        const path = configValueArr[0];\r\n        if (path !== `${ctx.method}-${ctx.path}`) {\r\n          continue\r\n        }\r\n        const rule = configValueArr[1];\r\n        const judgeType = configValueArr[2];\r\n        // 提取条件\r\n        const conditions = rule.match(/{(.+?)}/g).map(s => s.slice(1, -1));\r\n        // 验证规则是否匹配\r\n        let isValid = true;\r\n        for (const condition of conditions) {\r\n          const [key, val] = condition.split('=');\r\n          if (judgeType === 'AND') {\r\n            // 只要有一个不满足即直接返回false\r\n            if (!(key in params) || params[key] != val) {\r\n              isValid = false;\r\n              break;\r\n            }\r\n          } else if (judgeType === 'OR') {\r\n            // 只要有一个满足即直接返回true\r\n            if (key in params && params[key] == val) {\r\n              isValid = true;\r\n              break;\r\n            } else {\r\n              isValid = false;\r\n            }\r\n          } else if (judgeType === 'NOT') {\r\n            // 只要有一个满足匹配条件即直接返回false\r\n            if (key in params && params[key] == val) {\r\n              isValid = false;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (isValid) {\r\n          // 如果规则匹配上了，则直接返回key\r\n          returnValue = `${configValue}:${sort}`\r\n          break\r\n        }\r\n      }\r\n      return returnValue\r\n    case 'error_code_num':\r\n      if (opts.req) {\r\n        return 'not_success'\r\n      }\r\n      const code = (ctx.response.body ? ctx.response.body.code : 1)\r\n      return code === 0\r\n    default:\r\n      // 默认按照服务qps限流\r\n      return {appName: opts}\r\n  }\r\n}\r\n\r\nexport async function getHashField(redis, key, field) {\r\n  return await redis.hget(key, field);\r\n}\r\n\r\nexport async function getAllHashField(redis, key) {\r\n  return await redis.hgetall(key);\r\n}\r\n\r\nexport async function getZSet(redis, key) {\r\n  const results = await redis.zrange(key, 0, -1, 'withscores');\r\n  if (results && results.length > 0) {\r\n    return results.reduce((acc, cur, i) => {\r\n      if (i % 2 === 0) {\r\n        acc[cur] = results[i + 1]\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }\r\n}\r\n","import Redis from \"ioredis\";\nimport microtime from \"./microtime.js\";\nimport {getZSet, getId, getHashField, getAllHashField} from \"./redisOperation.js\";\n\nconst RATE_CONFIG_PREFIX = 'BH-RATE-CONFIG:'\nconst RATE_SWITCH_PREFIX = 'BH-RATE-SWITCH:'\nconst RATE_LIMIT_PREFIX = 'BH-RATE-LIMIT:'\nconst RATE_LIMIT_HOT_PREFIX = 'BH-RATE-HOT:'\n\nconst rateLimit = function (options = {}) {\n  const appName = options.appName;\n  const cacheConfig = options.cacheConfig ?? {};\n  const logEnable = options.logEnable ?? true;\n  const rate_config_key = RATE_CONFIG_PREFIX + appName;\n  const rate_switch_key = RATE_SWITCH_PREFIX + appName;\n  const rate_limit_namespace = RATE_LIMIT_PREFIX + appName;\n  const rate_limit_hot_key = RATE_LIMIT_HOT_PREFIX + appName;\n  const db = new Redis({\n    connectTimeout: 1000,\n    retryStrategy(times) {\n      return Math.min(times * 50, 3000);\n    },\n    host: cacheConfig.ratelimitCacheHost ?? '127.0.0.1',\n    port: cacheConfig.ratelimitCachePort ?? 6379,\n    password: cacheConfig.ratelimitCachePassword ?? '',\n    db: cacheConfig.ratelimitCacheDb ?? 1,\n  });\n  db.on('error', err => {\n    if (logEnable) {\n      console.warn('koa rate limit error: ', err);\n    }\n  });\n  return async (ctx, next) => {\n    let types = []\n    let enable = false\n    let error_code_rate_config\n    const error_code_num_type = 'error_code_num'\n    try {\n      if (db.status !== 'ready') {\n        return await next()\n      }\n      // 如果没开启或者压根不存在，直接next\n      enable = await getHashField(db, rate_switch_key, 'enable');\n      if (!enable || enable == 'false') {\n        return await next()\n      }\n      // 判断每种限流类型下是否有剩余令牌\n      types = (await getHashField(db, rate_switch_key, 'types')).split(\",\");\n      for (const type of types) {\n        let id\n        if (type === 'hot') {\n          const configValue = await getZSet(db, rate_limit_hot_key);\n          if (configValue){\n            id = await getId(ctx, type, { appName, configValue });\n          }else {\n            continue\n          }\n        }else {\n          id = await getId(ctx, type, { appName, req: true });\n        }\n        let rate_config\n        if (type === 'hot' && !id) {\n          // 按热点参数 && 参数规则未匹配\n          continue\n        } else if (type === 'interface' || type === 'ip' || type === 'hot') {\n          rate_config = await getAllHashField(db, `${rate_config_key}:${type}:${id}`);\n        } else {\n          rate_config = await getAllHashField(db, `${rate_config_key}:${type}`);\n          if (type === error_code_num_type) error_code_rate_config = rate_config\n        }\n        if (!rate_config || Object.keys(rate_config).length === 0) {\n          continue\n        }\n        // redis操作\n        const key = `${rate_limit_namespace}:${type}:${id}`\n        const duration = rate_config.duration\n        const max = rate_config.max\n        const count = await db.zcard(key);\n        const remaining = count < max ? max - count : 0\n        if (!remaining) {\n          ctx.status = 429\n          return ctx.body = `超过速率限制，请稍后再试.`\n        }\n        if (type !== error_code_num_type) {\n          const now = microtime.now()\n          const start = now - duration * 1000\n          const operations = [\n            ['zremrangebyscore', key, 0, start],\n            ['zadd', key, now, now],\n            ['zremrangebyrank', key, 0, -(max + 1)],\n            ['pexpire', key, duration]\n          ]\n          await db.multi(operations).exec()\n        }\n      }\n    } catch (e) {\n      if (logEnable) {\n        console.error(e.message)\n      }\n    }\n    await next()\n    // 对于错位码的限流逻辑\n    try {\n      if (db.status !== 'ready') {\n        return\n      }\n      if (enable == 'true'\n        && types.includes(error_code_num_type)\n        && error_code_rate_config\n        && Object.keys(error_code_rate_config).length !== 0\n      ) {\n        const id = await getId(ctx, error_code_num_type, {appName});\n        // 此处获取的是responseCode，如果code不为0，则记录redis\n        if (!id) {\n          const duration = error_code_rate_config.duration\n          const max = error_code_rate_config.max\n          const key = `${rate_limit_namespace}:${error_code_num_type}:not_success`\n          const now = microtime()\n          const start = now - duration * 1000\n          const operations = [\n            ['zremrangebyscore', key, 0, start],\n            ['zadd', key, now, now],\n            ['zremrangebyrank', key, 0, -(max + 1)],\n            ['pexpire', key, duration]\n          ]\n          await db.multi(operations).exec()\n        }\n      }\n    } catch (e) {\n      if (logEnable) {\n        console.error(e.message)\n      }\n    }\n  };\n};\n\nexport default rateLimit;\n"],"names":[],"mappings":"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"}